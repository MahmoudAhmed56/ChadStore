let drawProductsUI,addedItems,productsMiniOneDom=document.querySelector(".products.main.flexWrap"),productsMiniTowDom=document.querySelector(".row.products.mini.tow"),cartBody=document.querySelector(".cart-body"),cartHead=document.querySelector(".cart-head span"),itemNumber=document.querySelectorAll(".item-number-cart"),productsInCartLocalStorageString=localStorage.getItem("productsInCart"),productsInCartLocalStorageJson=JSON.parse(productsInCartLocalStorageString),products=productTrendingMiniTow;(drawProductsUI=function(e=[]){let t=e.map(e=>`\n        <div class="item">\n        <div class="media">\n          <div class="thumbnial object-cover">\n            <a href="#">\n              <img\n                src="${e.imgUrl}"\n                alt="apparel1"\n              />\n            </a>\n          </div>\n          <div class="hover-able">\n            <ul>\n              <li class="active">\n                <a class="cart" onclick="addedToFavorite(${e.id})"><i class="ri-heart-${1==e.liked?"fill":"line"}"></i></a>\n              </li>\n              <li>\n                <a class="cart" href="#"><i class="ri-eye-line"></i></a>\n              </li>\n              <li>\n                <a  class="cart" onclick="addedToCart(${e.id})"><i class="ri-shopping-cart-line"></i></a>\n              </li>\n            </ul>\n          </div>\n          <div class="discount circle flexCenter">\n            <span>32%</span>\n          </div>\n        </div>\n        <div class="content">\n          <h3 class="main-links">\n            <a onclick="saveItemData(${e.id})">${e.title}</a>\n          </h3>\n          <div class="rating">\n            <div class="stars"></div>\n            <span class="mini-text">(${e.reviewsCount})</span>\n          </div>\n          <div class="price">\n            <span class="current">$${e.price}</span>\n            <span class="normal mini-text">$${e.priceDashed}</span>\n          </div>\n          <div class="mini-text">\n            <p>${e.Sold} Sold</p>\n            <p>Free Shipping</p>\n          </div>\n        </div>\n      </div>\n        `);productsMiniOneDom.innerHTML=t.join("")})(JSON.parse(localStorage.getItem("products"))||products);let addedItem=productsInCartLocalStorageString?productsInCartLocalStorageJson:[];function addedToCart(e){let t=products.find(t=>t.id===e);addedItem.some(e=>e.id===t.id)?addedItem=addedItem.map(e=>(e.id===t.id&&(e.qty+=1),e)):addedItem.push(t),cartBody.innerHTML="",addedItem.forEach(e=>{cartBody.innerHTML+=`\n    <ul class="products mini">\n      <li class="item">\n        <div class="thumbnail object-cover">\n          <a onclick="saveItemData(${e.id})"><img src="${e.imgUrl}" alt="${e.title}"></a>\n        </div>\n        <div class="item-content">\n          <p><a onclick="saveItemData(${e.id})">${e.title}</a></p>\n          <span class="price">\n            <span>$${e.price}</span>\n            <span class="fly-item"><span>${e.qty}x</span></span>\n          </span>\n        </div>\n        <a onclick="removeFromCart(${e.id})" class="item-remove"><i class="ri-close-line"></i></a>\n      </li>\n    </ul>`}),localStorage.setItem("productsInCart",JSON.stringify(addedItem));for(let e=0;e<itemNumber.length;e++)itemNumber[e].innerHTML=addedItem.length}(addedItems=function(){addedItem&&addedItem.map(e=>{cartBody.innerHTML+=`\n  <ul class="products mini">\n    <li class="item">\n      <div class="thumbnail object-cover">\n        <a onclick="saveItemData(${e.id})"><img src="${e.imgUrl}" alt="${e.title}"></a>\n      </div>\n      <div class="item-content">\n        <p><a onclick="saveItemData(${e.id})">${e.title}</a></p>\n        <span class="price">\n          <span>$${e.price}</span>\n          <span class="fly-item"><span>${e.qty}x</span></span>\n        </span>\n      </div>\n      <a onclick="removeFromCart(${e.id})" class="item-remove"><i class="ri-close-line"></i></a>\n    </li>\n  </ul>`});for(let e=0;e<itemNumber.length;e++)itemNumber[e].innerHTML=addedItem.length})();let cart=document.querySelectorAll("a.cart");for(let e=0;e<cart.length;e++)cart[e].addEventListener("click",e=>{e.preventDefault()});function getUniqueArr(e,t){return e.map(e=>e[t]).map((e,t,a)=>a.indexOf(e)==t&&t).filter(t=>e[t]).map(t=>e[t])}function saveItemData(e){localStorage.setItem("productId",e),window.location="./page-single.html"}let input=document.getElementById("searchInp");function search(e,t){let a=t.filter(t=>-1!==t.title.toLowerCase().indexOf(e.toLowerCase()));drawProductsUI(a)}input.addEventListener("keyup",function(e){search(e.target.value,products),""===e.target.value.trim()&&drawProductsUI(products)});let favoriteItem=localStorage.getItem("productsFavorite")?JSON.parse(localStorage.getItem("productsFavorite")):[];function addedToFavorite(e){let t=products.find(t=>t.id===e);t.liked=!0;let a=favoriteItem.some(e=>e.id===t.id);console.log(a);let n=getUniqueArr(favoriteItem=[...favoriteItem,t],"id");localStorage.setItem("productsFavorite",JSON.stringify(n)),products.map(e=>{e.id===t.id&&(e.liked=!0)}),localStorage.setItem("products",JSON.stringify(products)),drawProductsUI(products)}let brandFilter=document.getElementById("brandFilter");function getProductsFilteredByBrand(e){let t=e.target.value,a=JSON.parse(localStorage.getItem("products"))||productTrendingMiniTow;"All"===t?drawProductsUI(a):(a=a.filter(e=>e.information.BRAND===t),drawProductsUI(a))}brandFilter.addEventListener("change",getProductsFilteredByBrand);